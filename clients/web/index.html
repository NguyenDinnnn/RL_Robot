<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>á»¨NG Dá»¤NG Há»ŒC TÄ‚NG CÆ¯á»œNG TRONG VIá»†C Tá»I Æ¯U HÃ“A ÄÆ¯á»œNG ÄI Cá»¦A ROBOT</title>
<link rel="stylesheet" href="./style.css">

<!-- CSS nhá» Ä‘á»ƒ sáº¯p xáº¿p 2 hÃ ng theo yÃªu cáº§u (khÃ´ng sá»­a logic JS) -->
<style>
  /* Layout: 2 hÃ ng - má»—i hÃ ng 2 card ngang */
  .main-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 18px;
  }
  .row {
    display: flex;
    gap: 20px;
    align-items: flex-start;
  }
  .row .card {
    flex: 1;
    min-width: 0;
  }
  /* Giá»¯ tÆ°Æ¡ng thÃ­ch khi style.css cÃ³ quy táº¯c khÃ¡c */
</style>
</head>
<body>
<div class="main-container">

  <!-- HÃ€NG 1: MÃ´i trÆ°á»ng (trÃ¡i) + Äiá»u khiá»ƒn (pháº£i) -->
  <div class="row">
    <div class="card simulation-card">
      <div class="card-header">
        <span class="card-icon">ğŸ¤–</span>
        <span class="card-title">MÃ´i TrÆ°á»ng MÃ´ Phá»ng</span>
        <span style="margin-left: auto; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 10px; font-size: 12px;">Sáºµn sÃ ng</span>
      </div>
      
      <div class="grid-container">
        <div class="grid" id="grid"></div>
        
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color robot">ğŸ¤–</div>
            <span>Robot</span>
          </div>
          <div class="legend-item">
            <div class="legend-color goal"></div>
            <span>Má»¥c tiÃªu</span>
          </div>
          <div class="legend-item">
            <div class="legend-color obstacle"></div>
            <span>Váº­t cáº£n</span>
          </div>
          <div class="legend-item">
            <div class="legend-color waypoint"></div>
            <span>Äiá»ƒm trung gian</span>
          </div>
        </div>
        
        <div id="msg" class="status-message">MÃ´i trÆ°á»ng Ä‘Ã£ Ä‘Æ°á»£c reset</div>
      </div>
    </div>

    <div class="card combined-control-card">
      <div class="combined-content">
        <div class="control-section">
          <div class="section-header">
            <span class="card-icon">ğŸ®</span>
            <span class="card-title">Äiá»u Khiá»ƒn Robot</span>
          </div>
          
          <div class="button-group">
            <button class="btn btn-start" onclick="startAutoMove('random')">â–¶ Auto Move (Random)</button>
            <button class="btn btn-start" onclick="startAutoMove('greedy')">â–¶ Auto Move (Greedy)</button>
            <button class="btn btn-stop" onclick="stopAll()">ğŸ›‘ Stop</button>
          </div>
                    
          <div class="button-group">
            <button class="btn btn-reset" onclick="resetGrid()">ğŸ”„ Reset</button>
            <!-- <button class="btn btn-reset" onclick="resetAllGrid()">ğŸŒ Reset All</button> -->
            <button class="btn btn-debug" onclick="toggleDebug()">ğŸ”§ Debug</button>
          </div>
          
          <div id="manualControls" class="manual-controls" style="display:none;">
            <h4 style="text-align:center; margin-bottom:10px;">Äiá»u khiá»ƒn thá»§ cÃ´ng</h4>
            <div class="direction-buttons">
              <button class="btn btn-debug" onclick="manualMove('up')">â†‘</button>
              <button class="btn btn-debug" onclick="manualMove('right')">â†’</button>
              <button class="btn btn-debug" onclick="manualMove('down')">â†“</button>
              <button class="btn btn-debug" onclick="manualMove('left')">â†</button>
            </div>
          </div>
        </div>

        <div class="algorithm-section">
          <div class="section-header">
            <span class="card-icon">ğŸ§ </span>
            <span class="card-title">Thuáº­t ToÃ¡n Há»c TÄƒng CÆ°á»ng</span>
          </div>
          
          <div class="algorithm-buttons">
            <button class="btn-algorithm" onclick="runAlgorithm('MC')">Monte Carlo</button>
            <button class="btn-algorithm" onclick="runAlgorithm('Q-learning')">Q-Learning</button>
            <button class="btn-algorithm" onclick="runAlgorithm('SARSA')">SARSA</button>
            <button class="btn-algorithm" onclick="runAlgorithm('A2C')">A2C</button>
            <button class="btn-algorithm" onclick="runAStar()">A*</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- HÃ€NG 2: Reward (trÃ¡i) + Thá»‘ng kÃª hiá»‡u suáº¥t (pháº£i) -->
  <div class="row">
    <div class="card stats-card">
      <div class="card-header">
        <span class="card-icon">ğŸ“ˆ</span>
        <span class="card-title">Biá»ƒu Ä‘á»“ miá»n thá»ƒ hiá»‡n hÃ m pháº§n thÆ°á»Ÿng theo bÆ°á»›c Ä‘i</span>
      </div>
      <canvas id="rewardChart" width="300" height="240"></canvas>
    </div>

    <div class="card stats-card">
      <div class="card-header">
        <span class="card-icon">ğŸ“Š</span>
        <span class="card-title">Thá»‘ng KÃª Hiá»‡u Suáº¥t</span>
      </div>
      
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">THUáº¬T TOÃN</div>
          <div class="stat-value" id="current-algorithm">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">REWARD</div>
          <div class="stat-value" id="current-reward">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">STEP</div>
          <div class="stat-value" id="current-steps">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">WAYPOINTS</div>
          <div class="stat-value" id="current-waypoints">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">THá»œI GIAN</div>
          <div class="stat-value" id="current-time">-</div>
        </div>
      </div>
      
      <div id="algoResult" class="algo-result" style="display:none;"></div>

      <canvas id="trajectory" width="300" height="240" style="border:1px solid #ccc; margin-top:10px;"></canvas>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="./site.js"></script>
</body>
</html>
